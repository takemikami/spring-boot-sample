/*
 * This file was generated by the Gradle 'init' task.
 *
 * This is a general purpose Gradle build.
 * Learn how to create Gradle builds at https://guides.gradle.org/creating-new-gradle-builds/
 */

apply plugin: 'java'
apply plugin: 'war'
apply plugin: 'appengine'
apply plugin: 'org.springframework.boot'

buildscript {
  repositories {
    mavenCentral()
  }
  dependencies {
    classpath("org.springframework.boot:spring-boot-gradle-plugin:1.5.10.RELEASE")
    classpath("com.google.appengine:gradle-appengine-plugin:1.9.59")
  }
}

repositories {
  mavenCentral()
}

dependencies {
  compile("org.springframework.boot:spring-boot-starter-thymeleaf")
  compile("org.springframework.boot:spring-boot-starter-web:1.5.10.RELEASE")
  compile("org.springframework.boot:spring-boot-starter-security:1.5.10.RELEASE")
  compile("org.springframework.session:spring-session-core:2.0.2.RELEASE")
  compile("com.google.appengine:appengine-api-1.0-sdk:1.9.62")
  compile("com.googlecode.objectify:objectify:5.1.22")

  compile group: 'com.fasterxml.jackson.core', name: 'jackson-core', version: '2.9.4'
  compile group: 'com.fasterxml.jackson.core', name: 'jackson-databind', version: '2.9.4'
  compile group: 'com.fasterxml.jackson.core', name: 'jackson-annotations', version: '2.9.4'

  providedCompile("javax.servlet:javax.servlet-api:3.1.0")
  // runtime("org.springframework.boot:spring-boot-devtools:1.3.0.RELEASE")
}

appengineExplodeApp {
  doLast {
    delete fileTree('build/exploded-app/WEB-INF/lib') {
      include 'spring-boot-starter-tomcat-*.jar'
      include 'tomcat-embed-*.jar'
      include 'spring-boot-devtools-*.jar'
    }
  }
}