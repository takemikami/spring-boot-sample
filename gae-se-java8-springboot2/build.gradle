/*
 * This file was generated by the Gradle 'init' task.
 *
 * This is a general purpose Gradle build.
 * Learn how to create Gradle builds at https://guides.gradle.org/creating-new-gradle-builds/
 */

apply plugin: 'java'
apply plugin: 'war'
apply plugin: 'com.google.cloud.tools.appengine'
apply plugin: 'org.springframework.boot'
apply plugin: 'io.spring.dependency-management'

buildscript {
   ext {
       springBootVersion = '2.0.0.RELEASE'
   }
   repositories {
       mavenCentral()
   }
   dependencies {
       classpath("org.springframework.boot:spring-boot-gradle-plugin:${springBootVersion}")
       classpath('com.google.cloud.tools:appengine-gradle-plugin:1.3.3')
   }
}

targetCompatibility = "1.8"
sourceCompatibility = "1.8"

repositories {
   mavenCentral()
}

dependencies {
   compile("org.springframework.boot:spring-boot-starter-web")
   compile("org.springframework.boot:spring-boot-starter-actuator")

   testCompile('junit:junit:4.+')

   providedCompile("javax.servlet:javax.servlet-api:3.1.0")
   runtime("org.springframework.boot:spring-boot-devtools")
}

explodeWar {
   doLast {
       delete fileTree("build/exploded-${rootProject.name}/WEB-INF/lib") {
           include 'spring-boot-starter-tomcat-*.jar'
           include 'tomcat-embed-*.jar'
           include 'spring-boot-devtools-*.jar'
       }
   }
}
